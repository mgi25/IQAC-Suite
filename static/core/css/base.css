/* ==========================================================================
   IQAC Suite — Command Center (Unified CSS)
   Visual-only: reset, tokens, utilities, shell, topbar, sidebar, content.
   Font: Open Sans (inherits from HTML)
   ========================================================================== */

/* 0) Modern reset */
*, *::before, *::after { box-sizing: border-box; }
html, body { height: 100%; }
html:focus-within { scroll-behavior: smooth; }
body {
  margin: 0;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  font-family: "Open Sans", system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  font-size: var(--fs-16);
  color: var(--ink-900);
  background: var(--gray-050);
}
img, svg, video, canvas, audio, iframe { display: block; max-width: 100%; }
img { height: auto; }
input, button, textarea, select { font: inherit; }
a { text-decoration: none; color: inherit; }

/* Prevent blinking caret on non-editables and enforce proper cursors */
/* Only input, textarea, and contenteditable should show text caret */
*:not(input):not(textarea):not([contenteditable="true"]) {
  caret-color: transparent;
}
/* Clickable controls use pointer; avoid text cursor on spans/divs */
.btn, .chip-btn, .nav-link, .nav-sublink, .action-card, .stat-card, [role="button"], button, a { cursor: pointer; }
/* Clickable UI shouldn’t show text selection/caret */
.btn, .chip-btn, .nav-link, .nav-sublink, .action-card, .stat-card,
.kpi-card, .cal-nav, .seg-btn, .notification-btn, .profile-btn,
.paginate_button, .chip, .tag, .badge, .day {
  -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;
}
/* Allow caret where explicitly editable */
[contenteditable] { caret-color: auto; }

/* 1) Design tokens */
:root{
  /* Brand palette */
  --christ-blue:#2c5aa0; 
  --christ-blue-dark:#1e4180; 
  --christ-blue-light:#e8f0f9;
  --blue-600:#2c5aa0; 
  --blue-700:#1e4180; 
  --blue-050:#e8f0f9;
  --gold-accent:#d4af37;

  --ink-900:#0f172a; --ink-800:#1f2937; --ink-700:#374151;
  --muted-600:#4b5563; --muted-500:#6b7280; --muted-400:#9ca3af;

  --gray-900:#111827; --gray-800:#1f2937; --gray-700:#374151;
  --gray-600:#4b5563; --gray-500:#6b7280; --gray-400:#9ca3af;
  --gray-300:#d1d5db; --gray-200:#e5e7eb; --gray-100:#f3f4f6; --gray-050:#f9fafb;
  --white:#fff;

  /* Elevation & radii */
  --shadow-sm:0 1px 2px rgba(0,0,0,.05);
  --shadow:0 1px 4px rgba(0,0,0,.08);
  --shadow-md:0 4px 12px rgba(0,0,0,.10);
  --shadow-lg:0 10px 24px rgba(0,0,0,.12);

  --radius:8px; --radius-lg:12px; --radius-xl:16px;

  /* Layout scaffold */
  --sidebar-w: 18rem;     /* ~288px */
  --topbar-h: 3.75rem;    /* 60px */
  --content-max: 1200px;

  /* Fluid typography */
  --fs-12: clamp(.70rem,.68rem + .2vw,.75rem);
  --fs-14: clamp(.80rem,.78rem + .3vw,.875rem);
  --fs-16: clamp(.95rem,.92rem + .3vw,1rem);
  --fs-18: clamp(1.05rem,1rem + .4vw,1.125rem);
  --fs-20: clamp(1.15rem,1.06rem + .5vw,1.25rem);
  --fs-24: clamp(1.25rem,1.12rem + .8vw,1.5rem);
  --fs-32: clamp(1.5rem,1.2rem + 1.4vw,2rem);
  --fs-40: clamp(1.75rem,1.3rem + 2.2vw,2.5rem);

  /* Fluid spacing */
  --sp-0:0;
  --sp-1: clamp(.25rem, .22rem + .3vw, .5rem);
  --sp-2: clamp(.5rem, .45rem + .4vw, .75rem);
  --sp-3: clamp(.75rem, .7rem + .5vw, 1rem);
  --sp-4: clamp(1rem, .9rem + .8vw, 1.5rem);
  --sp-5: clamp(1.25rem, 1rem + 1vw, 2rem);

  /* Transitions */
  --tr: all .25s cubic-bezier(.4,0,.2,1);
}

/* 2) Global utilities */
.container { width:100%; max-width:var(--content-max); margin-inline:auto; padding-inline: var(--sp-3); }
.stack > * + * { margin-top: var(--sp-3); }
.cluster { display:flex; flex-wrap:wrap; gap: var(--sp-2); align-items:center; }
.grid { display:grid; gap: var(--sp-3); }
.grid-auto-250 { grid-template-columns: repeat(auto-fit, minmax(15.5rem,1fr)); }
.cols-2 { grid-template-columns: repeat(2,1fr); }
.cols-3 { grid-template-columns: repeat(3,1fr); }
.cols-4 { grid-template-columns: repeat(4,1fr); }

.hidden-sm { display:none; }
@media (min-width:576px){ .hidden-sm { display:initial; } }
.only-mobile { display:block; }
@media (min-width:768px){ .only-mobile { display:none; } }

/* 3) Buttons (visual only) */
.btn, .control-btn, .save-btn{
  display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
  padding:.6rem .9rem; border-radius:10px; border:1px solid transparent;
  cursor:pointer; transition:var(--tr); font-weight:600;
}
.btn-primary, .control-btn.primary, .save-btn{
  background: linear-gradient(135deg,var(--blue-600),var(--blue-700));
  color:#fff; border-color:transparent;
}
.btn-primary:hover, .control-btn.primary:hover, .save-btn:hover{
  filter:brightness(.98); box-shadow:0 0 0 .2rem rgb(44 90 160 / .25);
}

/* 4) Global shell grid */
body.command-center-layout{
  min-height:100dvh;
  display:grid;
  grid-template-areas: "topbar topbar" "sidebar main";
  grid-template-rows: var(--topbar-h) 1fr;
  grid-template-columns: var(--sidebar-w) 1fr;
  overflow-x:hidden;
}

/* 5) Responsive shell helpers */
@media (max-width: 992px){
  body.command-center-layout {
    grid-template-areas: "topbar" "main";
    grid-template-columns: 1fr;
  }
  .left-control-panel {
    position: fixed;
    inset: var(--topbar-h) auto 0 0;
    width: min(85vw, 20rem);
    transform: translateX(-101%);
    transition: transform .3s ease;
    z-index: 50;
    background: #fff;
  }
  body.sidebar-open .left-control-panel { transform: translateX(0); }
  body.sidebar-open .main-viewscreen::after{
    content:""; position:fixed; inset:var(--topbar-h) 0 0 0;
    background: rgb(0 0 0 / .35); backdrop-filter: blur(2px);
  }
}
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.01ms !important; animation-iteration-count:1 !important; transition-duration:.01ms !important; scroll-behavior:auto !important; }
}

/* =============================================================================
   TOP UTILITY BAR — brand blue
   ============================================================================= */
.top-utility-bar{
  grid-area:topbar;
  background:linear-gradient(135deg,var(--christ-blue),var(--christ-blue-dark));
  color:#ffffff;
  border-bottom:none;
  box-shadow:var(--shadow-md);
  display:flex; align-items:center; justify-content:space-between;
  padding:0 var(--sp-4);
  position:relative;
  z-index:3000; /* ensure above other content */
}

/* Hide the campus logo image (keep text) */
.top-utility-bar .app-logo img,
.top-utility-bar img.logo-img{ display:none !important; }

.utility-left{ display:flex; align-items:center; min-width:0; }
.app-logo{ display:flex; align-items:center; gap:.75rem; color:inherit; }
.app-name{ font-size:var(--fs-18); font-weight:700; color:#ffffff !important; }

/* Hamburger uses white */
#sidebarToggle{ color:#ffffff !important; }
#sidebarToggle span,
#sidebarToggle span span{ background:#ffffff !important; }

.utility-right{ display:flex; align-items:center; gap:1.5rem; }
/* Limit white text to topbar controls only */
.utility-right > *{ color:#ffffff; }

/* Notification bell (forced GOLD) */
.notification-section{ position:relative; z-index:3100; }
.notification-btn{
  position:relative; width:36px; height:36px;
  display:inline-flex; align-items:center; justify-content:center;
  background:transparent; border:0; cursor:pointer; border-radius:8px;
}
.notification-btn .notification-icon{
  display:inline-flex; align-items:center; justify-content:center;
  width:1.5rem; height:1.5rem;
  color:var(--gold-accent);
}
.notification-btn .notification-icon svg{
  width:100%; height:100%; display:block; overflow:visible;
  fill:currentColor;
  filter: drop-shadow(0 1px 0 rgba(0,0,0,.2));
}
.notification-btn:hover{ background:rgba(255,255,255,.08); }
.notification-btn:active{ background:rgba(255,255,255,.16); transform:translateY(0); }
.notification-btn[aria-expanded="true"] .notification-icon{ color:#ffd95e !important; }
.notification-btn:focus-visible{ outline:2px solid #ffd95e; outline-offset:2px; }
.notification-badge{
  position:absolute;
  top:0;
  right:0;
  transform:translate(50%,-50%);
  min-width:18px; padding:.125rem .375rem; border-radius:10px;
  background:#ef4444; color:#fff; font-size:.75rem; font-weight:700;
  text-align:center; pointer-events:none; z-index:2;
}

/* Notification dropdown */
.notification-dropdown{
  position:fixed; top:var(--topbar-h); right:1rem;
  width:320px; max-width:90vw; max-height:500px;
  background:#fff; border:1px solid var(--gray-200); border-radius:12px;
  box-shadow:var(--shadow-lg); opacity:0; visibility:hidden; transform:translateY(-10px);
  transition:var(--tr); z-index:3200; overflow:hidden; color:var(--ink-900);
}
.notification-dropdown.active{ opacity:1; visibility:visible; transform:translateY(0); }
.notification-header{ display:flex; align-items:center; justify-content:space-between; padding:.75rem 1rem; border-bottom:1px solid var(--gray-200); }
.notification-list{ max-height:400px; overflow-y:auto; }
.notification-item{ display:flex; gap:.75rem; padding:.75rem 1rem; border-bottom:1px solid var(--gray-100); }
.notification-item.unread{ background:var(--gray-050); }
.notification-item .notification-icon{ width:32px; height:32px; border-radius:50%; display:grid; place-items:center; background:var(--gray-200); color:var(--christ-blue); }

/* Profile (gold avatar) */
.profile-section{ position:relative; }
.profile-btn{
  display:inline-flex; align-items:center; gap:.75rem;
  background:transparent; border:0; padding:.5rem 1rem; color:#ffffff; cursor:pointer;
}
.profile-avatar{
  width:32px; height:32px; border-radius:999px; display:grid; place-items:center;
  font-weight:700; font-size:.875rem; background:var(--gold-accent); color:#fff;
}
.profile-dropdown{
  position:absolute; top:calc(100% + .5rem); right:0; min-width:200px; background:#fff;
  border:1px solid var(--gray-200); border-radius:12px; box-shadow:var(--shadow-lg);
  opacity:0; visibility:hidden; transform:translateY(-10px); transition:var(--tr); z-index:20000; color:var(--ink-900);
}
.profile-dropdown.active{ opacity:1; visibility:visible; transform:translateY(0); }
.profile-dropdown .dropdown-header{
  padding:.75rem 1rem;
  border-bottom:1px solid var(--gray-200);
}
.profile-dropdown .user-info strong{ display:block; }
.profile-dropdown .user-info small{ color:var(--muted-500); }
.profile-dropdown .dropdown-item{
  display:flex; align-items:center; gap:.5rem;
  padding:.5rem 1rem; color:var(--ink-900); text-decoration:none;
}
.profile-dropdown .dropdown-item:hover{ background:var(--gray-050); }
.profile-dropdown .dropdown-divider{
  height:1px; background:var(--gray-200); margin:.25rem 0;
}

/* =============================================================================
   LEFT CONTROL PANEL
   ============================================================================= */
.left-control-panel{
  grid-area:sidebar; background:#fff; border-right:1px solid var(--gray-200);
  overflow-y:auto; overflow-x:hidden; box-shadow:var(--shadow-sm);
}
.control-navigation{ padding:var(--sp-4) 0; }
.nav-item, .nav-section{ margin-bottom:.25rem; }

.nav-link, .nav-section-header{
  display:flex; align-items:center; gap:.75rem;
  padding:.875rem 1.25rem; color:#374151; font-weight:600; font-size:var(--fs-14);
  border-right:3px solid transparent; transition:var(--tr);
}
.nav-link:hover, .nav-section-header:hover{ background:var(--gray-100); }
.nav-link.active{
  background:var(--christ-blue-light); color:var(--christ-blue-dark);
  border-right-color:var(--christ-blue);
}
.nav-icon{ width:1.25rem; text-align:center; font-size:1rem; }
.expand-icon{ margin-left:auto; font-size:.8em; transition:transform .25s; }

.nav-submenu{
  max-height:0; overflow:hidden; transition:max-height .3s ease; background:var(--gray-050);
}
.nav-section.expanded .nav-submenu{
  max-height:999px; border-top:1px solid var(--gray-200); border-bottom:1px solid var(--gray-200);
}
.nav-section.expanded .expand-icon{ transform:rotate(90deg); }

.nav-sublink{
  display:flex; align-items:center; gap:.65rem; padding:.7rem 2rem;
  color:#4b5563; font-size:var(--fs-14); font-weight:500; transition:var(--tr);
}
.nav-sublink:hover{ background:#fff; color:var(--christ-blue); padding-left:2.25rem; }
.nav-subgroup{ padding:.35rem 0 .5rem; }
.nav-subgroup .nav-sublabel{
  display:flex; align-items:center; gap:.75rem;
  width:100%;
  background:none;
  border:0;
  padding:.6rem 1.5rem .45rem 2rem;
  color:#6b7280; font-size:var(--fs-12); font-weight:700;
  text-transform:uppercase; letter-spacing:0.05em;
  cursor:pointer;
  text-align:left;
}
.nav-subgroup .nav-sublabel:hover,
.nav-subgroup .nav-sublabel:focus-visible{
  background:var(--gray-100);
  outline:none;
}
.nav-subgroup .subgroup-expand-icon{
  margin-left:auto;
  font-size:.8em;
  transition:transform .25s;
}
.nav-subgroup .nav-subgroup-links{
  display:none;
  flex-direction:column;
  padding-top:.1rem;
}
.nav-subgroup.open .nav-subgroup-links{ display:flex; }
.nav-subgroup.open .nav-sublabel{ background:var(--gray-075); }
.nav-subgroup.open .subgroup-expand-icon{ transform:rotate(90deg); }
.nav-subgroup .nav-sublink{ padding-left:2.5rem; }
.nav-subgroup .nav-sublink i{ width:1.25rem; text-align:center; }

/* Collapsed sidebar */
body.command-center-layout.sidebar-collapsed{ grid-template-columns:4.25rem 1fr; }
body.command-center-layout.sidebar-collapsed .left-control-panel{ width:4.25rem; }
body.command-center-layout.sidebar-collapsed .control-navigation .nav-text,
body.command-center-layout.sidebar-collapsed .nav-section-header .nav-text,
body.command-center-layout.sidebar-collapsed .nav-submenu,
body.command-center-layout.sidebar-collapsed .expand-icon,
body.command-center-layout.sidebar-collapsed .nav-subsection{ display:none !important; }
body.command-center-layout .left-control-panel{ transition:width .25s ease !important; }
body.command-center-layout .main-viewscreen{ transition:all .25s ease !important; }

/* =============================================================================
   MAIN VIEWSCREEN + DASHBOARD
   ============================================================================= */
.main-viewscreen{ grid-area:main; background:#fff; overflow-y:auto; position:relative; }
.viewscreen-content{ padding:var(--sp-4); max-width:100%; animation:fadeIn .25s ease-out; }
@keyframes fadeIn{ from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }

.dashboard-container{ max-width:1200px; margin-inline:auto; }
.dashboard-header{
  display:flex; align-items:center; gap:var(--sp-3);
  margin-bottom:var(--sp-3); padding-bottom:var(--sp-2); border-bottom:2px solid var(--gray-100);
}
.dashboard-title{ font-size:var(--fs-32); font-weight:800; color:var(--ink-800); margin:0; }
.dashboard-icon{
  width:3.25rem; height:3.25rem; border-radius:999px; display:grid; place-items:center;
  color:#fff; background:linear-gradient(135deg,var(--christ-blue),var(--christ-blue-dark)); box-shadow:var(--shadow-md);
}
.dashboard-welcome{
  margin-bottom:var(--sp-4); padding:1.5rem;
  background:linear-gradient(135deg,var(--christ-blue-light),rgba(44,90,160,.05));
  border-radius:var(--radius-lg); border-left:4px solid var(--christ-blue);
}

.dashboard-stats{
  display:grid; gap:var(--sp-3);
  grid-template-columns:repeat(auto-fit,minmax(16rem,1fr));
  margin-bottom:var(--sp-5);
}
.stat-card{
  background:#fff; padding:clamp(1rem,.6rem + 1vw,1.5rem); border-radius:var(--radius-lg);
  text-align:left; box-shadow:var(--shadow); border:1px solid var(--gray-200);
  transition:var(--tr); position:relative; overflow:hidden;
}
.stat-card::before{
  content:""; position:absolute; top:0; left:0; right:0; height:4px;
  background:linear-gradient(90deg,var(--christ-blue),var(--gold-accent));
}
.stat-card:hover{ transform:translateY(-3px); box-shadow:var(--shadow-lg); border-color:var(--christ-blue); }
.stat-number{ font-size:var(--fs-40); font-weight:800; color:var(--christ-blue); margin:.25rem 0 0; }
.stat-label{ font-size:var(--fs-12); font-weight:600; color:#6b7280; text-transform:uppercase; letter-spacing:.06em; }

.dashboard-actions{
  display:grid; gap:var(--sp-3);
  grid-template-columns:repeat(auto-fit,minmax(19rem,1fr));
}
.action-card{
  background:#fff; padding:clamp(1rem,.6rem + 1vw,1.5rem); border-radius:var(--radius-lg);
  box-shadow:var(--shadow); border:1px solid var(--gray-200); text-decoration:none; color:inherit;
  transition:var(--tr); display:flex; align-items:flex-start; gap:var(--sp-3); position:relative; overflow:hidden;
}
.action-card::before{
  content:""; position:absolute; top:0; left:0; right:0; height:3
}

/* ===================== Global overlays and input caret ===================== */
/* App-wide loading/saving overlay consistent with dashboard theme */
.app-overlay{position:fixed;inset:0;background:rgba(255,255,255,0.88);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;z-index:10000;opacity:1;transition:opacity .2s ease}
.app-overlay.hidden{opacity:0;pointer-events:none}
.app-overlay .overlay-card{background:#fff;padding:32px 40px;border-radius:16px;box-shadow:0 12px 40px -10px rgba(11,53,102,.28);display:flex;flex-direction:column;align-items:center;gap:14px;min-width:260px;max-width:80vw}
.app-overlay .spinner{width:48px;height:48px;border-radius:999px;border:5px solid #e6edf5;border-top-color:#1e60b1;animation:app-spin .9s linear infinite}
.app-overlay .message{font-weight:800;font-size:16px;color:#1e60b1;letter-spacing:.3px;text-align:center}
.app-overlay.saving .spinner{border-top-color:#0d7d3e}
.app-overlay.saving .message{color:#0d7d3e}
@keyframes app-spin{to{transform:rotate(360deg)}}

/* Visible typing indicator for inputs in sidebar and dashboards */
.left-control-panel input[type="text"],
.left-control-panel input[type="search"],
.left-control-panel select,
.left-control-panel textarea,
.ems-dashboard input[type="text"],
.ems-dashboard input[type="search"],
.ems-dashboard input[type="email"],
.ems-dashboard input[type="number"],
.ems-dashboard select,
.ems-dashboard textarea{
  caret-color:#1e60b1;
  box-shadow: inset 0 -2px 0 #c9d6e8;
  transition: box-shadow .2s ease, border-color .2s ease;
}
.left-control-panel input[type="text"]:focus,
.left-control-panel input[type="search"]:focus,
.left-control-panel select:focus,
.left-control-panel textarea:focus,
.ems-dashboard input[type="text"]:focus,
.ems-dashboard input[type="search"]:focus,
.ems-dashboard input[type="email"]:focus,
.ems-dashboard input[type="number"]:focus,
.ems-dashboard select:focus,
.ems-dashboard textarea:focus{
  box-shadow: inset 0 -3px 0 #1e60b1, 0 0 0 2px rgba(30,96,177,0.12);
  border-color:#1e60b1 !important;
}