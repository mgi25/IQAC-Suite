{% load static %}
{% load socialaccount %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login – IQAC Portal</title>

  <link rel="stylesheet" href="{% static 'core/css/login.css' %}" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>

<body>

  <div class="background-shapes">
    <div class="shape shape1"></div>
    <div class="shape shape2"></div>
    <div class="shape shape3"></div>
  </div>

  <div class="container">
    <div class="card">

      {% if messages %}
        <div class="custom-alert" id="alertBox">
          <div class="alert-content">
            <i class="fas fa-exclamation-circle"></i>
            <div class="alert-text">
              {% for message in messages %}
                <p>{{ message }}</p>
              {% endfor %}
            </div>
            <button class="close-btn" onclick="dismissAlert()">×</button>
          </div>
        </div>
      {% endif %}

      <h2>Welcome User!</h2>

      <p class="subtitle">
        <i class="fas fa-info-circle"></i>
        Only use <strong>Christ Credentials</strong> to access this app
      </p>

      <a href="{% provider_login_url 'google' method='oauth2' process='login' %}" class="google-login-btn">
        <img src="https://developers.google.com/identity/images/g-logo.png" width="18" height="18" />
        Continue With Google
      </a>

      <div class="info-panel">
        <ul class="info-list">
          <li>
            <i class="fas fa-check-circle"></i>
            Secured authentication provided by Google
          </li>
          <li>
            <i class="fas fa-shield-alt"></i>
            Only institutional mails <code>@christuniversity.in</code> are allowed
          </li>
        </ul>
      </div>

      <p class="footer">
        Need help? Contact 
        <a href="mailto:support@christuniversity.in">support@christuniversity.in</a>
      </p>
    </div>
  </div>

  <script>
    function dismissAlert() {
      const alert = document.getElementById('alertBox');
      if (alert) alert.style.display = 'none';
    }

    setTimeout(dismissAlert, 5000);
  </script>

</body>
</html>
